<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Tienda | Web Interactiva</title>
    <!-- Incluye Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Incluye Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Fuentes de Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Enlace al archivo CSS externo -->
    <link rel="stylesheet" href="css/style.css">
    <!-- Metadatos para la estructura de la aplicación -->
    <!-- Chosen Palette: Calm Beige & Slate. A warm, neutral palette that is professional and easy on the eyes.
    Application Structure Plan: A dashboard-style Single Page Application (SPA) with a fixed sidebar for desktop views and a toggleable drawer for mobile. The main content area dynamically displays different sections (Dashboard, Inventory, Finance, Settings, Architecture, Product Detail Modal). This structure was chosen because it mirrors the modular nature of the described application, allowing users to intuitively explore each core functionality (inventory, sales, finance, etc.) as a separate, digestible view, which is more user-friendly than a linear document. Navigation is handled by updating the URL hash, simulating GoRouter. Key interactions include real-time filtering of tables, modal dialogs for detailed views, and interactive charts to visualize data trends, making the abstract concepts of the README tangible and navigable.
    Visualization & Content Choices:
    - Dashboard: Goal: Inform at a glance. Viz: KPI cards (HTML/CSS) for key stats, line chart (Chart.js) for sales trends, bar chart (Chart.js) for top products. Interaction: None on KPIs/charts, but clear labels. Justification: Provides a quick, high-level overview of business health, a primary user need for management.
    - Inventory: Goal: Organize & Explore. Viz: Interactive HTML table with product/variant list. Interaction: Live search/filter (JS), clickable rows opening a detail modal (JS/HTML). The modal includes a small bar chart for simulated variant sales history. Justification: Simulates a real inventory management interface, allowing active exploration and drill-down into specific product data structures (Product base and Variant).
    - Finance: Goal: Compare & Analyze. Viz: Bar chart (Chart.js) for Income vs. Expenses over time, Doughnut chart (Chart.js) for current month's expense breakdown. Interaction: Hover tooltips for data points. Justification: Charts are ideal for comparing financial data and understanding proportions, making complex numbers easy to digest and visualize trends.
    - Settings: Goal: Demonstrate Flexibility (user-definable attributes). Viz: Simulated interactive tree for categories and lists for property definitions (HTML/CSS/JS). Interaction: Clicking categories to show suggested properties, "Add" buttons to convey creation capability (non-functional for demo). Justification: Directly visualizes the user-definable nature of categories and properties, a key differentiator of the proposed system. It shows *how* the system is flexible, rather than just stating it.
    - Architecture: Goal: Explain technical structure. Viz: Simple diagrams built with styled divs (HTML/CSS). Interaction: None. Justification: A clean, code-based diagram is sufficient to explain the technical concepts of Clean Architecture and Isar DB relationships without external libraries or complex SVG, adhering to the constraints.
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
</head>
<body class="text-[#333333]">

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar para Escritorio, inicialmente oculto para Móviles -->
        <aside id="sidebar" class="sidebar hidden md:flex flex-col border-r border-[#E0E0E0]">
            <div class="h-16 flex items-center justify-center border-b border-[#E0E0E0]">
                <h1 class="text-xl font-bold text-[#333333]">Tienda Admin</h1>
            </div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="#dashboard" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                    Resumen
                </a>
                <a href="#inventory" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path></svg>
                    Inventario
                </a>
                <a href="#sales" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    Ventas (POS)
                </a>
                <a href="#purchases" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                    Compras
                </a>
                <a href="#clients" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm-6-4a4 4 0 00-4-4H5a4 4 0 00-4 4v1h10v-1zm11-4a4 4 0 00-4-4h-1"></path></svg>
                    Clientes
                </a>
                <a href="#ratings" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.324 1.118l1.519 4.674c.3.921-.755 1.688-1.539 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.539-1.118l1.519-4.674a1 1 0 00-.324-1.118L2.285 10.11c-.783-.57-.381-1.81.588-1.81h4.915a1 1 0 00.95-.69l1.519-4.674z"></path></svg>
                    Calificaciones
                </a>
                <a href="#cash_closure" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    Cierre de Caja
                </a>
                <a href="#finance" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    Finanzas
                </a>
                <a href="#settings" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                     <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.096 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    Configuración
                </a>
                <a href="#architecture" class="nav-link flex items-center px-4 py-2 text-[#6C757D] hover:bg-[#E4EBF5] rounded-lg transition-colors">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path></svg>
                    Arquitectura
                </a>
            </nav>
        </aside>

        <!-- Mobile Drawer Backdrop -->
        <div id="drawer-backdrop" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-40 hidden md:hidden" onclick="toggleDrawer()"></div>

        <!-- Main Content Area -->
        <div class="flex flex-col flex-1">
            <!-- Header Bar -->
            <header class="header-bar h-16 flex items-center justify-between px-6">
                <button id="menu-toggle-btn" class="md:hidden text-[#333333]">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
                <h2 id="current-page-title" class="text-xl font-bold text-[#333333] flex-grow text-center md:text-left">Resumen</h2>
                <div class="flex items-center space-x-4">
                    <!-- User Avatar/Info -->
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 rounded-full bg-[#007BFF]/20 flex items-center justify-center">
                            <svg class="w-5 h-5 text-[#007BFF]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                        </div>
                        <span class="text-[#333333] text-sm hidden md:block">Admin</span>
                    </div>
                </div>
            </header>

            <!-- Content Area - Dynamic Sections -->
            <div class="main-content flex-grow">
                <!-- Dashboard Section -->
                <section id="dashboard-section" class="view-content">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Dashboard Principal</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Esta sección ofrece una vista rápida de las métricas más importantes del negocio, permitiendo una evaluación instantánea del rendimiento diario y las tendencias de ventas, tal como se describe en la sección de "Informes y Proyecciones Estratégicas" del plan.</p>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="card flex items-center">
                            <div class="p-3 mr-4 text-[#007BFF] bg-[#E0F2F7] rounded-full">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"></path></svg>
                            </div>
                            <div>
                                <p class="mb-1 text-sm font-medium text-[#6C757D]">Clientes Hoy</p>
                                <p class="text-xl font-semibold text-[#333333]">24</p>
                            </div>
                        </div>
                        <div class="card flex items-center">
                            <div class="p-3 mr-4 text-[#28A745] bg-[#E6F7ED] rounded-full">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg>
                            </div>
                            <div>
                                <p class="mb-1 text-sm font-medium text-[#6C757D]">Ventas Hoy</p>
                                <p class="text-xl font-semibold text-[#333333]">$ 1,850.50</p>
                            </div>
                        </div>
                        <div class="card flex items-center">
                            <div class="p-3 mr-4 text-[#6F42C1] bg-[#F2E6F7] rounded-full">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path></svg>
                            </div>
                            <div>
                                <p class="mb-1 text-sm font-medium text-[#6C757D]">Órdenes Pendientes</p>
                                <p class="text-xl font-semibold text-[#333333]">5</p>
                            </div>
                        </div>
                        <div class="card flex items-center">
                            <div class="p-3 mr-4 text-[#DC3545] bg-[#FBE8E9] rounded-full">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.01-1.742 3.01H4.42c-1.53 0-2.493-1.676-1.743-3.01l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                            </div>
                            <div>
                                <p class="mb-1 text-sm font-medium text-[#6C757D]">Stock Bajo</p>
                                <p class="text-xl font-semibold text-[#333333]">12 Items</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Tendencia de Ventas (Últimos 30 Días)</h4>
                            <div class="chart-container">
                                <canvas id="salesTrendChart"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Productos Más Vendidos (Top 5)</h4>
                             <div class="chart-container">
                                <canvas id="topProductsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Inventory Section -->
                <section id="inventory-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Gestión de Inventario</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Aquí se visualiza la gestión de inventario, permitiendo buscar y filtrar productos. Al hacer clic en un ítem, se accede a una vista detallada con todas sus propiedades, historial y proveedores, demostrando la estructura de `Product` y `ProductVariant`.</p>
                    
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6 space-y-4 md:space-y-0 md:space-x-4">
                        <div class="relative w-full md:w-1/3">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                <svg class="w-5 h-5 text-[#6C757D]" viewBox="0 0 24 24" fill="none"><path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            </span>
                            <input id="inventorySearch" class="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#007BFF] focus:border-transparent bg-[#F8F9FA] text-[#333333]" type="text" placeholder="Buscar por nombre o SKU">
                        </div>
                        <div class="flex items-center space-x-4 w-full md:w-auto">
                            <select id="categoryFilter" class="block w-full border rounded-lg py-2 px-3 focus:ring-2 focus:ring-[#007BFF] focus:border-transparent bg-[#F8F9FA] text-[#333333]">
                                <option value="all">Todas las categorías</option>
                                <option value="Ropa">Ropa</option>
                                <option value="Accesorios">Accesorios</option>
                                <option value="Perfumes">Perfumes</option>
                            </select>
                            <button class="px-4 py-2 bg-[#007BFF] text-white rounded-lg hover:bg-[#0056b3] transition-colors whitespace-nowrap">Nuevo Producto</button>
                        </div>
                    </div>
                    <div class="card overflow-x-auto">
                        <table class="min-w-full divide-y divide-[#E0E0E0]">
                            <thead class="bg-[#E4EBF5]">
                                <tr>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">SKU</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Producto</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Color</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Talla</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider text-center">Stock</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Precio</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryTableBody" class="bg-white divide-y divide-[#E0E0E0]">
                                <!-- Rows will be injected by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Sales (POS) Section -->
                <section id="sales-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Gestión de Ventas (POS)</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Módulo de punto de venta intuitivo. Permite agregar productos al carrito, aplicar descuentos y procesar ventas eficientemente, registrando todos los detalles de la transacción y el usuario que la realizó.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Carrito de Venta</h4>
                            <div class="relative mb-4">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                    <svg class="w-5 h-5 text-[#6C757D]" viewBox="0 0 24 24" fill="none"><path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                </span>
                                <input class="w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-[#007BFF] focus:border-transparent bg-[#F8F9FA] text-[#333333]" type="text" placeholder="Buscar producto o escanear código">
                            </div>
                            <div class="border border-[#E0E0E0] rounded-lg p-4 h-64 overflow-y-auto mb-4 bg-[#F8F9FA]">
                                <ul id="salesCartList" class="space-y-2 text-sm">
                                    <li class="flex justify-between items-center"><span>Remera Básica (M, Rojo) x1</span> <span class="font-bold">$25.00</span></li>
                                    <li class="flex justify-between items-center"><span>Perfume Cítrico (100ml) x1</span> <span class="font-bold">$80.00</span></li>
                                </ul>
                            </div>
                            <div class="flex justify-between items-center text-lg font-bold mb-4">
                                <span>Total:</span> <span id="salesCartTotal">$105.00</span>
                            </div>
                            <button class="w-full px-4 py-2 bg-[#28A745] text-white rounded-lg hover:bg-[#218838] transition-colors">Procesar Venta</button>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Métodos de Pago</h4>
                            <ul class="space-y-3 text-sm">
                                <li class="flex items-center"><input type="radio" name="paymentMethod" class="mr-2 accent-[#007BFF]" checked> Efectivo</li>
                                <li class="flex items-center"><input type="radio" name="paymentMethod" class="mr-2 accent-[#007BFF]"> Tarjeta de Crédito/Débito</li>
                                <li class="flex items-center"><input type="radio" name="paymentMethod" class="mr-2 accent-[#007BFF]"> Cuenta Corriente (Cliente)</li>
                                <li class="flex items-center"><input type="radio" name="paymentMethod" class="mr-2 accent-[#007BFF]"> Otro</li>
                            </ul>
                            <div class="mt-6">
                                <h4 class="font-semibold text-[#333333] mb-2 text-lg">Descuento</h4>
                                <input type="number" placeholder="%" class="w-24 px-3 py-2 border rounded-lg bg-[#F8F9FA]">
                                <button class="ml-4 px-4 py-2 bg-[#007BFF] text-white rounded-lg hover:bg-[#0056b3]">Aplicar</button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Purchases Section -->
                <section id="purchases-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Gestión de Compras</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Control de todas las órdenes de compra y el registro de nueva mercadería. Aquí se puede armar un carrito unificado para varios proveedores y generar órdenes de compra individuales, con la flexibilidad de ajustar precios al recibirlas.</p>
                    
                    <div class="flex justify-end mb-6">
                        <button class="px-4 py-2 bg-[#007BFF] text-white rounded-lg hover:bg-[#0056b3] transition-colors whitespace-nowrap">Nueva Orden de Compra</button>
                    </div>

                    <div class="card overflow-x-auto">
                        <table class="min-w-full divide-y divide-[#E0E0E0]">
                            <thead class="bg-[#E4EBF5]">
                                <tr>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">ID Orden</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Proveedor</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Fecha Pedido</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Estado</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Total Est.</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="purchaseOrdersTableBody" class="bg-white divide-y divide-[#E0E0E0]">
                                <!-- Rows will be injected by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Clients Section -->
                <section id="clients-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Gestión de Clientes</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Manejo de la base de datos de clientes, incluyendo su información de contacto, historial de compras y la gestión de sus cuentas corrientes, con la capacidad de calificar su fidelidad.</p>
                    
                    <div class="flex justify-end mb-6">
                        <button class="px-4 py-2 bg-[#007BFF] text-white rounded-lg hover:bg-[#0056b3] transition-colors whitespace-nowrap">Nuevo Cliente</button>
                    </div>

                    <div class="card overflow-x-auto">
                        <table class="min-w-full divide-y divide-[#E0E0E0]">
                            <thead class="bg-[#E4EBF5]">
                                <tr>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">ID</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Nombre</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Contacto</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Saldo Cta. Cte.</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Calificación</th>
                                    <th class="table-cell text-left text-xs font-medium text-[#6C757D] uppercase tracking-wider">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="clientsTableBody" class="bg-white divide-y divide-[#E0E0E0]">
                                <!-- Rows will be injected by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Ratings Section -->
                <section id="ratings-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Sistema de Calificaciones</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Permite calificar productos, proveedores y clientes. Esta funcionalidad es clave para el análisis de popularidad, la evaluación del rendimiento de proveedores y la categorización de la fidelidad de los clientes, apoyando la proyección de compras.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Calificación de Productos</h4>
                            <ul class="space-y-3 text-sm" id="productRatingsList">
                                <!-- Ratings will be injected by JavaScript -->
                            </ul>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Calificación de Proveedores</h4>
                            <ul class="space-y-3 text-sm" id="supplierRatingsList">
                                <!-- Ratings will be injected by JavaScript -->
                            </ul>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Calificación de Clientes</h4>
                            <ul class="space-y-3 text-sm" id="clientRatingsList">
                                <!-- Ratings will be injected by JavaScript -->
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Cash Register Closure Section -->
                <section id="cash_closure-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Cierre de Caja por Usuario</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Interfaz para el cierre de caja al finalizar un turno. Permite registrar el conteo final de efectivo, visualizar las transacciones del usuario y detectar discrepancias, fundamental para el control y la auditoría individual.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Resumen del Turno Actual</h4>
                            <div class="space-y-2 text-sm">
                                <p><strong>Usuario:</strong> Admin (Simulado)</p>
                                <p><strong>Fecha/Hora de Apertura:</strong> 2025-06-27 09:00 AM</p>
                                <p><strong>Saldo Inicial:</strong> $100.00</p>
                                <p><strong>Ventas Registradas:</strong> $105.00</p>
                                <p><strong>Otros Ingresos:</strong> $0.00</p>
                                <p><strong>Egresos Registrados:</strong> $0.00</p>
                                <p class="font-bold text-lg text-[#007BFF]">Saldo Calculado: $205.00</p>
                            </div>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Realizar Cierre</h4>
                            <div class="mb-4">
                                <label for="closingBalance" class="block text-sm font-medium text-[#333333] mb-1">Saldo Final Contado:</label>
                                <input type="number" id="closingBalance" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#007BFF] focus:border-transparent bg-[#F8F9FA] text-[#333333]" placeholder="$ 0.00">
                            </div>
                            <div class="mb-4">
                                <label for="closureNotes" class="block text-sm font-medium text-[#333333] mb-1">Notas (Opcional):</label>
                                <textarea id="closureNotes" rows="3" class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-[#007BFF] focus:border-transparent bg-[#F8F9FA] text-[#333333]" placeholder="Comentarios sobre el cierre..."></textarea>
                            </div>
                            <button class="w-full px-4 py-2 bg-[#007BFF] text-white rounded-lg hover:bg-[#0056b3] transition-colors">Cerrar Caja</button>
                        </div>
                    </div>
                </section>

                <!-- Finance Section -->
                <section id="finance-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Módulo Financiero</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Visualización del módulo financiero. Los gráficos permiten comparar ingresos y egresos a lo largo del tiempo y entender la composición de los gastos, reflejando el "Cálculo de Ganancias" y el control de gastos fijos y variables.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                       <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Ingresos vs. Egresos (Últimos 6 Meses)</h4>
                            <div class="chart-container">
                                <canvas id="financeChart"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Desglose de Gastos (Mes Actual)</h4>
                             <div class="chart-container">
                                <canvas id="expensesChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Configuración de Atributos</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Esta es una simulación interactiva de cómo los dueños pueden gestionar categorías y propiedades. Demuestra la flexibilidad del sistema para crear una estructura de producto personalizada, un pilar del diseño propuesto.</p>
                    <div class="card grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="font-semibold text-[#333333] mb-2 text-lg">Gestión de Categorías</h4>
                            <div id="categoryTree" class="p-4 border border-[#E0E0E0] rounded-lg bg-[#F8F9FA] h-96 overflow-y-auto">
                                <ul class="space-y-1 text-sm">
                                    <li>
                                        <button class="flex items-center text-[#333333] hover:text-[#007BFF] font-medium py-1" onclick="selectCategory('cat01')">
                                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7m-9 4h4"></path></svg>
                                            Ropa
                                        </button>
                                        <ul class="ml-6 pl-4 border-l border-[#E0E0E0] space-y-1">
                                            <li><button class="flex items-center text-[#333333] hover:text-[#007BFF] py-1" onclick="selectCategory('cat01-1')"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7m-9 4h4"></path></svg>Remeras</button></li>
                                            <li><button class="flex items-center text-[#333333] hover:text-[#007BFF] py-1" onclick="selectCategory('cat01-2')"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7m-9 4h4"></path></svg>Pantalones</button></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <button class="flex items-center text-[#333333] hover:text-[#007BFF] font-medium py-1" onclick="selectCategory('cat02')">
                                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7m-9 4h4"></path></svg>
                                            Accesorios
                                        </button>
                                        <ul class="ml-6 pl-4 border-l border-[#E0E0E0] space-y-1">
                                            <li><button class="flex items-center text-[#333333] hover:text-[#007BFF] py-1" onclick="selectCategory('cat02-1')"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7m-9 4h4"></path></svg>Relojes</button></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <button class="mt-4 px-4 py-2 bg-[#007BFF] text-white rounded-lg hover:bg-[#0056b3] transition-colors text-sm">Nueva Categoría</button>
                        </div>
                        <div>
                            <h4 class="font-semibold text-[#333333] mb-2 text-lg">Propiedades para: <span id="selectedCategoryName" class="font-bold text-[#007BFF]">Todas</span></h4>
                            <div id="propertiesList" class="p-4 border border-[#E0E0E0] rounded-lg bg-[#F8F9FA] h-96 overflow-y-auto space-y-2 text-sm">
                                <p class="text-[#6C757D]">Seleccione una categoría para ver sus propiedades sugeridas o añada una nueva.</p>
                            </div>
                            <button class="mt-4 px-4 py-2 bg-[#007BFF] text-white rounded-lg hover:bg-[#0056b3] transition-colors text-sm">Nueva Propiedad</button>
                        </div>
                    </div>
                </section>

                <!-- Architecture Section -->
                <section id="architecture-section" class="view-content hidden">
                    <h3 class="text-2xl md:text-3xl font-bold text-[#333333] mb-4">Arquitectura del Sistema</h3>
                    <p class="text-[#6C757D] mb-8 text-sm md:text-base">Una visualización de la estructura técnica y el modelo de datos propuesto, siguiendo los principios de la Arquitectura Limpia para un desarrollo robusto y escalable.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="card flex flex-col items-center justify-center text-center">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Clean Architecture</h4>
                            <div class="space-y-4">
                                <div class="w-48 py-3 text-center bg-[#007BFF]/10 text-[#007BFF] rounded-lg font-medium border border-[#007BFF]">Presentation (UI)</div>
                                <div class="text-xl text-[#6C757D]">&darr;</div>
                                <div class="w-48 py-3 text-center bg-[#28A745]/10 text-[#28A745] rounded-lg font-medium border border-[#28A745]">Domain (Business Logic)</div>
                                <div class="text-xl text-[#6C757D]">&darr;</div>
                                <div class="w-48 py-3 text-center bg-[#6F42C1]/10 text-[#6F42C1] rounded-lg font-medium border border-[#6F42C1]">Data (Repositories, Isar DB)</div>
                            </div>
                            <p class="mt-4 text-xs text-[#6C757D]">Separación de capas para mantenibilidad y escalabilidad.</p>
                        </div>
                        <div class="card flex flex-col items-center justify-center text-center">
                            <h4 class="font-semibold text-[#333333] mb-4 text-lg">Relaciones Clave - Isar DB</h4>
                            <div class="space-y-4">
                               <div class="flex items-center justify-center text-sm">
                                   <span class="px-3 py-1 bg-[#FFC107]/10 text-[#FFC107] rounded-full">Product</span>
                                   <span class="mx-2 text-[#6C757D]">→ (1:N) →</span>
                                   <span class="px-3 py-1 bg-[#FFC107]/10 text-[#FFC107] rounded-full">ProductVariant</span>
                               </div>
                               <div class="flex items-center justify-center text-sm">
                                   <span class="px-3 py-1 bg-[#007BFF]/10 text-[#007BFF] rounded-full">ProductVariant</span>
                                   <span class="mx-2 text-[#6C757D]">→ (*:*) →</span>
                                   <span class="px-3 py-1 bg-[#007BFF]/10 text-[#007BFF] rounded-full">PropertyDefinition</span>
                               </div>
                               <div class="flex items-center justify-center text-sm">
                                   <span class="px-3 py-1 bg-[#28A745]/10 text-[#28A745] rounded-full">Category</span>
                                   <span class="mx-2 text-[#6C757D]">→ (1:N) →</span>
                                   <span class="px-3 py-1 bg-[#28A745]/10 text-[#28A745] rounded-full">Product</span>
                               </div>
                                <div class="flex items-center justify-center text-sm">
                                   <span class="px-3 py-1 bg-[#DC3545]/10 text-[#DC3545] rounded-full">Sale</span>
                                   <span class="mx-2 text-[#6C757D]">→ (1:N) →</span>
                                   <span class="px-3 py-1 bg-[#DC3545]/10 text-[#DC3545] rounded-full">SoldItem</span>
                               </div>
                            </div>
                            <p class="mt-4 text-xs text-[#6C757D]">Modelo de datos flexible y eficiente que evita la redundancia.</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div id="productModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden modal-backdrop opacity-0">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto modal-content" onclick="event.stopPropagation()">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <div>
                      <h3 id="modalProductName" class="text-2xl font-bold text-[#333333]"></h3>
                      <p id="modalProductCategory" class="text-[#6C757D] text-sm"></p>
                    </div>
                    <button onclick="closeModal()" class="text-[#6C757D] hover:text-[#333333] text-2xl leading-none">&times;</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <img id="modalProductImage" src="https://placehold.co/600x400/F8F9FA/6C757D?text=Imagen+Producto" alt="Imagen del Producto" class="w-full h-64 object-cover rounded-lg mb-4 border border-[#E0E0E0]">
                        <h4 class="font-semibold text-[#333333] mb-2 text-lg">Detalles</h4>
                        <div id="modalProductDetails" class="text-sm text-[#333333] space-y-1"></div>
                    </div>
                    <div>
                        <h4 class="font-semibold text-[#333333] mb-2 text-lg">Historial de Ventas (Variante)</h4>
                        <div class="chart-container h-48 max-h-48 mb-4">
                            <canvas id="variantSalesHistoryChart"></canvas>
                        </div>
                        <h4 class="font-semibold text-[#333333] mb-2 text-lg">Proveedores</h4>
                        <ul id="modalProductSuppliers" class="text-sm text-[#333333] space-y-2"></ul>
                    </div>
                </div>
            </div>
            <div class="bg-[#F8F9FA] px-6 py-4 flex justify-end">
                <button type="button" onclick="closeModal()" class="px-4 py-2 bg-white border border-[#E0E0E0] rounded-lg text-[#333333] hover:bg-[#F0F2F5] transition-colors text-sm">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- Enlace al archivo JavaScript principal -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
